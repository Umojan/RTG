# TooEasyTravel Bot (@TET_bot)
## Описание

Телеграм-бот для поиска авиабилетов позволяет пользователям находить билеты на самолет, используя заданные критерии, 
такие как пункт отправления, пункт назначения и дата вылета. Поиск может быть отсортирован по цене, лучшему предложению 
или времени вылета, а результаты предоставляются с возможностью перехода на сайт для покупки авиабилета.

Критерии поиска могут вводиться вне очереди с помощью панели меню, которая представляет собой сообщение с множеством 
кнопок. Меню отправляется каждый раз после выполнения ввода какого-либо критерия, а предыдущее меню со старыми данными 
удаляется.

### Команды бота:

    /start - Начать общение с ботом
    /menu - Начать поиск авиабилетов
    /history - история поиска
    /help - помощь c ботом

## Установка и настройка

    Убедитесь, что у вас установлен Python версии 3.6 или выше.
    Склонируйте репозиторий на свой компьютер.

    Установите необходимые зависимости, используя команду pip install -r requirements.txt.

    Создайте файл .env и добавьте в него следующие переменные:

    BOT_TOKEN='Ваш токен бота'
    API_KEY='Ваш ключ API'

    Запустите программу.

## Использование

    Начните чат с вашим телеграм-ботом.
    Введите пункт отправления и назначения.
    Выберите дату вылета.
    Выберите способ сортировки результатов поиска (цена, лучшее предложение или время вылета).
    Бот предоставит вам список подходящих авиабилетов с возможностью перехода на сайт для покупки.

# База данных   
#### database_functions.py
## Краткое описание

Данный код представляет собой простую реализацию базы данных **SQLite3** и модели пользователя с использованием **Peewee ORM**. 
Он содержит класс User, который позволяет добавлять, получать и удалять пользователей из базы данных. Код может быть 
использован в любом проекте, где нужна простая база данных пользователей.


### Инструкция по использованию

База данных, имеет следующие действия:

    # Создайте экземпляр класса User, передав ему id пользователя.
    user = User(user_id)

    # Добавьте данные пользователя в базу данных, используя метод add(). Метод принимает параметры в формате "key=value" 
    # и сохраняет их в базе данных.
    user.add(last_name='Loe')

    # Получите данные пользователя из базы данных, используя метод get(). Метод возвращает словарь с данными пользователя.
    user_data = user.get()

    # Удалите пользователя из базы данных, используя метод delete().
    user.delete()

# Работа с API
#### api_functions.py

## Описание

Бот использует **Rapid API Travel Advisor**


Файл *api_functions.py* содержит функции для взаимодействия с API Travel Advisor, которое предоставляет информацию о рейсах и билетах. Этот файл использует библиотеки requests и loguru для отправки запросов и журналирования.

Основные функции в файле:

    api_request(): отправляет запросы на указанный конечный пункт API с заданными параметрами и методом запроса.
    get_request(): отправляет GET-запрос к API.
    city_finder(): ищет информацию о городе и аэропорте, используя данные, введенные пользователем.
    tickets_finder(): выполняет поиск билетов, используя введенные пользователем данные, такие как пункт отправления, пункт назначения, дату, количество пассажиров и класс рейса. Эта функция также обрабатывает ошибки и возвращает информацию о найденных рейсах.

Этот файл также содержит вспомогательные функции для преобразования времени и работы с ошибками API.

Для использования этого файла, импортируйте функции *city_finder()* и *tickets_finder()* в основной файл (main.py) и вызывайте их, когда требуется выполнить поиск городов или билетов.

Помимо этого, не забудьте включить файл *config.py*, в котором хранится ваш API-ключ, и добавить его в импорты в начале файла *api_functions.py*:


    from config import API_KEY


